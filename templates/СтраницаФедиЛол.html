{% extends "baseHTML.html" %}
{% block style %}
    <link href="static/FedyaStyle.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="static/jquery-3.7.1.min.js" defer></script>
    <script type="text/javascript" src="static/script.js" defer></script>
{% endblock %}
<body style="background-color: aqua">
{% block Kvass %}
    <div class="main">
        <div class="invis1">
            <div class="icon">
                <div class="iconInner">
                    <a href="/profile">
                        <img src="static/istockphoto-2041572395-612x612.jpg" class="profile">
                    </a>
                </div>
            </div>
            <div class="search">
                <form class="lenin" method="get" action="/searchBook">
                    <input type="text" placeholder="Поиск" class="POISKTEXT" name="searchText">
                </form>
            </div>
            <div class="menu">
                <button class="menu" data-hamburger="true" aria-label="Меню">
                    <div class="submenu">
                        <span class="submenu1"></span>
                        <span class="submenu2"></span>
                        <span class="submenu2"></span>
                        <span class="submenu3"></span>
                    </div>
                </button>
            </div>
        </div>
     </div>
    <div class="bookCount">
        Количество книг: {{ num }}
    </div>
    <div>
            ㅤ
    </div>
    <div>
        <table border="1" border-color="black">
        <tr>
            <td><b>Название книги</b></td>
            <td><b>Автор книги</b></td>
            <td><b>Информация о книге</b></td>
            {% if authType.userTypeId != 2 %} {#классный руководитель#}
            <td><b>BB</b></td>
            {% endif %}
        </tr>
        {% for book in bookshelf %}
        <tr>
            <td>{{ book.title }}</td>
            <td>{{ book.author }}</td>
            <td>{{ book.info }}</td>
            {% if authType.userTypeId == 1 %} {#ученик#}
                {% if book.bookstatusid == 1 %}
                <td><button class="bbb" id="book{{ book.id }}" data-userid="{{ book.userid }}" data-bookstatusid="{{ book.bookstatusid }}" onclick="bookBooking({{ book.id }})">Забронировать</button></td>
                {% elif book.bookstatusid == 2 %}
                <td><button class="bbb" id="book{{ book.id }}" data-userid="{{ book.userid }}" data-bookstatusid="{{ book.bookstatusid }}" onclick="cancelBookBooking({{ book.id }})">Отменить</button></td>
                {% elif book.bookstatusid == 3 %}
                <td><button class="bbb" id="book{{ book.id }}" data-userid="{{ book.userid }}" data-bookstatusid="{{ book.bookstatusid }}" disabled>Выдана</button></td>
                {% endif %}
            {% elif authType.userTypeId == 3 %} {#библиотекарь#}
                {% if book.bookstatusid == 1 %}
                <td><button class="bbb" id="book{{ book.id }}" data-userid="{{ book.userid }}" data-bookstatusid="{{ book.bookstatusid }}" disabled>Доступна</button></td>
                {% elif book.bookstatusid == 2 %}
                <td><button class="bbb" id="book{{ book.id }}" data-userid="{{ book.userid }}" data-bookstatusid="{{ book.bookstatusid }}" onclick="giveBook({{ book.id }})">Выдать</button></td>
                {% elif book.bookstatusid == 3 %}
                <td><button class="bbb" id="book{{ book.id }}" data-userid="{{ book.userid }}" data-bookstatusid="{{ book.bookstatusid }}" onclick="takeBook({{ book.id }})">Вернуть</button></td>
                {% endif %}
            {% endif %}
        </tr>
        {% endfor %}
        </table>
    </div>
{% endblock Kvass %}